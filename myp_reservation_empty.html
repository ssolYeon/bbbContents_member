<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>예약/구매 내역 - 마이페이지</title>

    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"
    />

    <link rel="stylesheet" href="/src/css/base/defalt.css" />
    <link rel="stylesheet" href="/src/css/components/components.css" />
    <link rel="stylesheet" href="/src/css/mypage_renewal/myp_common.css" />
    <link rel="stylesheet" href="/src/css/mypage_renewal/myp_index_sub.css" />
  </head>
  <body>
    <header>
      <h1 class="sr-only">예약/구매 내역</h1>
      <div class="container">
        <a href="javascript:;" id="backLink"
          ><img src="/src/assets/images/icons/icon_back_black@x3.png" alt=""
        /></a>
        <h1>예약/구매 내역</h1>
      </div>
    </header>

    <div id="app_wrapper">
      <main>
        <!-- 예약/구매 내역이 있을 때 -->
        <!-- 
			현황 뱃지(product_status): myp_index_sub.css 파일에 클래스별로 정리해두었습니다
			공통 버튼(box_button): 상황에 따라 button 또는 a태그로 교체해서 작업되도록 스타일 잡아놨습니다
			해당 주석은 삭제하셔도 됩니다
		 -->
        <!-- <div class="myp_container bg_grey">
          <div class="dateRange_button_wrap">
            <button type="button" class="dateRange_button">최근 3개월</button>
          </div>

          <div class="myp_reservation_item">
            <div class="myp_reservation_box">
              <a href="javascript:;" class="myp_reservation_header">
                <div>
                  <p class="myp_reservation_box_title">2025.08.14</p>
                  <p class="header_orderNum">#2025081417214017531</p>
                </div>
                <span class="header_button">상세보기</span>
              </a>

              <ul class="product_list">
                <li class="product_item">
                  <a href="javascript:;" class="product_box">
                    <div class="product_left">
                      <div class="product_thumb">
                        <img
                          src="src/assets/images/components/sample_132x88@x3.jpg"
                          alt=""
                        />
                      </div>
                      <span class="product_status pending_payment"></span>
                    </div>
                    <div class="product_right">
                      <div>
                        <p class="product_title text_ellipsis">
                          네스프레소 커피머신
                        </p>
                        <p class="product_info text_ellipsis_2">
                          자동세척,다양한 커피옵션, 컴팩트 디자인, 2년 무상 AS
                        </p>
                      </div>
                      <div>
                        <dl class="product_dl">
                          <dt>수량</dt>
                          <dd>1개</dd>
                        </dl>
                        <p class="product_price">149,000 원</p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="myp_reservation_item">
            <div class="myp_reservation_box">
              <a href="javascript:;" class="myp_reservation_header">
                <div>
                  <p class="myp_reservation_box_title">2025.08.14</p>
                  <p class="header_orderNum">#2025081417214017531</p>
                </div>
                <span class="header_button">상세보기</span>
              </a>

              <ul class="product_list">
                <li class="product_item">
                  <a href="javascript:;" class="product_box">
                    <div class="product_left">
                      <div class="product_thumb">
                        <img
                          src="src/assets/images/components/sample_132x88@x3.jpg"
                          alt=""
                        />
                      </div>
                      <span class="product_status paid"></span>
                    </div>
                    <div class="product_right">
                      <div>
                        <p class="product_title text_ellipsis">
                          네스프레소 커피머신
                        </p>
                        <p class="product_info text_ellipsis_2">
                          자동세척,다양한 커피옵션, 컴팩트 디자인, 2년 무상 AS
                        </p>
                      </div>
                      <div>
                        <dl class="product_dl">
                          <dt>수량</dt>
                          <dd>1개</dd>
                        </dl>
                        <p class="product_price">149,000 원</p>
                      </div>
                    </div>
                  </a>

                  <div class="box_button_wrap">
                    <button type="button" class="box_button medium bd_C4C7C5">
                      취소 · 환불 신청
                    </button>
                  </div>
                </li>
                <li class="product_item">
                  <div class="product_track_shipment">
                    <a href="javascript:;" class="btn_link">배송조회</a>
                  </div>
                  <a href="javascript:;" class="product_box">
                    <div class="product_left">
                      <div class="product_thumb">
                        <img
                          src="src/assets/images/components/sample_132x88@x3.jpg"
                          alt=""
                        />
                      </div>
                      <span class="product_status shipped"></span>
                    </div>
                    <div class="product_right">
                      <div>
                        <p class="product_title text_ellipsis">
                          네스프레소 커피머신
                        </p>
                        <p class="product_info text_ellipsis_2">
                          자동세척,다양한 커피옵션, 컴팩트 디자인, 2년 무상 AS
                        </p>
                      </div>
                      <div>
                        <dl class="product_dl">
                          <dt>수량</dt>
                          <dd>1개</dd>
                        </dl>
                        <p class="product_price">149,000 원</p>
                      </div>
                    </div>
                  </a>

                  <div class="box_button_wrap">
                    <button type="button" class="box_button medium bd_C4C7C5">
                      교환 · 반품
                    </button>
                    <a href="javascript:;" class="box_button medium bg_2D312F"
                      >구매확정</a
                    >
                  </div>
                </li>
                <li class="product_item">
                  <div class="product_track_shipment">
                    <a href="javascript:;" class="btn_link">배송조회</a>
                  </div>
                  <a href="javascript:;" class="product_box">
                    <div class="product_left">
                      <div class="product_thumb">
                        <img
                          src="src/assets/images/components/sample_132x88@x3.jpg"
                          alt=""
                        />
                      </div>
                      <span class="product_status delivered"> </span>
                    </div>
                    <div class="product_right">
                      <div>
                        <p class="product_title text_ellipsis">
                          네스프레소 커피머신
                        </p>
                        <p class="product_info text_ellipsis_2">
                          자동세척,다양한 커피옵션, 컴팩트 디자인, 2년 무상 AS
                        </p>
                      </div>
                      <div>
                        <dl class="product_dl">
                          <dt>수량</dt>
                          <dd>1개</dd>
                        </dl>
                        <p class="product_price">149,000 원</p>
                      </div>
                    </div>
                  </a>

                  <div class="box_button_wrap">
                    <button type="button" class="box_button medium bd_C4C7C5">
                      교환 · 반품
                    </button>
                    <a href="javascript:;" class="box_button medium bg_2D312F"
                      >구매확정</a
                    >
                    <button
                      type="button"
                      class="box_button full medium bd_C4C7C5"
                    >
                      후기 작성
                    </button>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <div class="myp_pagination">
            <a href="javascript:;" class="page_preview">이전 더보기</a>

            <div class="page_num_list">
              <a href="javascript:;" class="num">1</a>
              <a href="javascript:;" class="num active">2</a>
              <a href="javascript:;" class="num">3</a>
              <a href="javascript:;" class="num">4</a>
              <a href="javascript:;" class="num">5</a>
            </div>

            <a href="javascript:;" class="page_next">다음 더보기</a>
          </div>
        </div> -->

        <!-- 예약/구매 내역이 있을 때 -->
        <div class="myp_container_empty bg_grey">
          <div class="bbb_empty_container" id="bbb_empty_container">
            <img src="/src/assets/images/icons/icon_empty_cart@x3.png" alt="" />
            <p>예약/구매 내역이 없습니다.</p>
          </div>
        </div>
      </main>

      <footer>
        <div class="footer_top_container">
          <a href="javascript:void(0)" class="logo">
            <img
              src="/src/assets/images/common/footer_logo_white@x3.png"
              alt="봄봄봄"
            />
          </a>
          <button type="button" class="btn_business_toggle">
            사업자 정보
            <img
              src="/src/assets/images/icons/icon_btn_footer_down@x3.png"
              alt=""
            />
          </button>
        </div>
        <div class="footer_business_information_container">
          <div class="company_information">
            <p><strong>상호명</strong> : 주식회사 비롯엑스(Blot X)</p>
            <p><strong>대표자명</strong> : 장희덕</p>
            <p><strong>사업자등록번호</strong> : 252-87-03502</p>
            <p><strong>통신판매업 신고번호</strong> : 제2025-서울강서-2564호</p>
            <p>
              <strong>주소</strong> : 서울특별시 강서구 양천로 357 (려산빌딩)
              지하1층
            </p>
          </div>
          <div class="contact_information">
            <p>
              <strong>고객센터</strong> :
              <a href="mailto:cs@bombombom.im">cs@bombombom.im</a> /
              <a href="tel:02-6673-0955"> 02-6673-0955</a>
            </p>
            <p>
              <strong>개인정보보호 책임자</strong> : 개인정보보호팀장 (<a
                href="mailto:privacy@bombombom.im"
                >privacy@bombombom.im</a
              >)
            </p>
          </div>
        </div>
        <div class="footer_service_container">
          <a href="https://dev.bombombom.im/service/privacy"
            >개인정보처리방침</a
          >
          <a href="https://dev.bombombom.im/service/agreement"
            >서비스 이용약관</a
          >
          <!--<a href="https://dev.bombombom.im/board/?id=bulkorder">제휴문의 바로가기</a>-->
          <a href="http://127.0.0.1:8000/my/partner">제휴문의 바로가기</a>
        </div>
        <p class="footer_notice">
          비롯엑스는 통신판매 중개자로서 통신판매의 당사자가 아니며 상품의 예약,
          이용 및 환불 등과 관련한 의무와 책임은 각 판매자에게 있습니다.
        </p>
        <copy>Copyright (c) 2025 BOMBOMBOM. All Rights Reserved.</copy>
      </footer>

      <nav class="gnb_container gnb">
        <div class="container">
          <a href="/" class="">
            <img src="/src/assets/images/icons/icon_gnb_logo.png" alt="" />
            <span>홈</span>
          </a>
          <a href="/bb/" class="">
            <img src="/src/assets/images/icons/icon_gnb_bombom.svg" alt="" />
            <span>봄,봄</span>
          </a>
          <a href="/hb/" class="">
            <img src="/src/assets/images/icons/icon_gnb_haebom.svg" alt="" />
            <span>해봄</span>
          </a>
          <a href="/gb/" class="">
            <img src="/src/assets/images/icons/icon_gnb_gabom.svg" alt="" />
            <span>가봄</span>
          </a>
          <a href="/sb/" class="">
            <img src="/src/assets/images/icons/icon_gnb_sabom.svg" alt="" />
            <span>사봄</span>
          </a>
        </div>
      </nav>
    </div>

    <div class="dateRange_popUp">
      <div class="dateRange_popUp_dimm"></div>
      <div class="dateRange_form">
        <form action="#" method="post">
          <p class="dateRange_title">조회 기간</p>
          <ul class="dateRange_tabs">
            <li>전체</li>
            <li>1주</li>
            <li>2주</li>
            <li>1개월</li>
            <li>3개월</li>
            <li>직접 검색</li>
          </ul>
          <div class="dateRange_wrap">
            <div class="default_inputform_gruop" data-text="시작일">
              <label class="sr-only" for="fromDate">시작일</label>
              <div class="default_inputform">
                <input
                  type="text"
                  id="fromDate"
                  name="selectDate"
                  autocomplete="off"
                />
              </div>
            </div>

            <div class="default_inputform_gruop" data-text="종료일">
              <label class="sr-only" for="toDate">종료일</label>
              <div class="default_inputform">
                <input
                  type="text"
                  id="toDate"
                  name="selectDate"
                  autocomplete="off"
                />
              </div>
            </div>
          </div>

          <div class="box_button_wrap">
            <button
              type="button"
              class="box_button medium bd_C4C7C5 btn_dateRangeReset"
            >
              초기화
            </button>
            <button
              type="button"
              class="box_button medium bg_black btn_dateRangeSearch"
            >
              검색
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <script>
      $(function () {
        // [공통] Datepicker 설정
        $.datepicker.setDefaults({
          dateFormat: "yy'년' mm'월' dd'일'",
          prevText: "이전 달",
          nextText: "다음 달",
          monthNames: [
            "1월",
            "2월",
            "3월",
            "4월",
            "5월",
            "6월",
            "7월",
            "8월",
            "9월",
            "10월",
            "11월",
            "12월",
          ],
          dayNamesMin: ["일", "월", "화", "수", "목", "금", "토"],
          showMonthAfterYear: true,
          yearSuffix: "년",
          showOtherMonths: true,
          selectOtherMonths: true,
        });

        // 날짜 계산 및 입력 함수
        function setRangeDate(rangeText) {
          const toDate = new Date();
          let fromDate = new Date();

          if (rangeText === "1주") fromDate.setDate(toDate.getDate() - 7);
          else if (rangeText === "2주") fromDate.setDate(toDate.getDate() - 14);
          else if (rangeText === "1개월")
            fromDate.setMonth(toDate.getMonth() - 1);
          else if (rangeText === "3개월")
            fromDate.setMonth(toDate.getMonth() - 3);

          $("#fromDate").datepicker("setDate", fromDate);
          $("#toDate").datepicker("setDate", toDate);
        }

        // UI 노출 제어 (전체 탭 클릭 시 영역 숨김)
        function toggleUI(rangeText) {
          if (rangeText === "전체") {
            $(".dateRange_wrap, .btn_dateRangeReset").hide();
          } else {
            $(".dateRange_wrap, .btn_dateRangeReset").show();
          }
        }

        // 버튼 텍스트 가공 함수 (요청사항 반영)
        function getButtonText(rangeText) {
          const recentRanges = ["1주", "2주", "1개월", "3개월"];

          if (rangeText === "전체") return "전체";
          if (recentRanges.includes(rangeText)) return "최근 " + rangeText;

          if (rangeText === "직접 검색") {
            // "2025.12.06 ~ 2025.12.06" 형식으로 변환
            const fromVal = $("#fromDate")
              .val()
              .replace(/년 |월 /g, ".")
              .replace(/일/g, "");
            const toVal = $("#toDate")
              .val()
              .replace(/년 |월 /g, ".")
              .replace(/일/g, "");
            return fromVal + " ~ " + toVal;
          }
          return rangeText;
        }

        // 초기화 함수 (3개월 디폴트)
        function resetToDefault() {
          const defaultRange = "3개월";
          $(".dateRange_tabs li").removeClass("active");
          $(".dateRange_tabs li:contains('" + defaultRange + "')").addClass(
            "active"
          );
          setRangeDate(defaultRange);
          toggleUI(defaultRange);
          $(".dateRange_button").text("최근 " + defaultRange);
        }

        // 데이트피커 초기화
        $("#fromDate, #toDate").datepicker({
          beforeShow: function () {
            const activeTab = $(".dateRange_tabs li.active").text();
            const rangeTabs = ["1주", "2주", "1개월", "3개월", "전체"];

            if (rangeTabs.includes(activeTab)) {
              $(".dateRange_tabs li").removeClass("active");
              $(".dateRange_tabs li:contains('직접 검색')").addClass("active");
            }
          },
        });

        // 1. 실행 시 초기 설정
        resetToDefault();

        // 2. 팝업 열기
        $(".dateRange_button").on("click", function () {
          $(".dateRange_popUp").addClass("active");
        });

        // 탭 클릭 이벤트
        $(".dateRange_tabs li").on("click", function () {
          const rangeText = $(this).text();
          $(".dateRange_tabs li").removeClass("active");
          $(this).addClass("active");

          toggleUI(rangeText);

          if (rangeText === "전체") {
            $("#fromDate, #toDate").val("");
          } else if (rangeText !== "직접 검색") {
            setRangeDate(rangeText);
          }
        });

        // 5. 검색 버튼 클릭 (버튼 텍스트 변경 로직 포함)
        $(".btn_dateRangeSearch").on("click", function () {
          const activeTabText = $(".dateRange_tabs li.active").text();
          const resultText = getButtonText(activeTabText);

          $(".dateRange_button").text(resultText);
          $(".dateRange_popUp").removeClass("active");
        });

        // [추가 요청] 초기화 버튼 클릭
        $(".btn_dateRangeReset").on("click", function () {
          resetToDefault();
        });

        // 6. 딤 클릭 시 닫기
        $(".dateRange_popUp_dimm").on("click", function () {
          $(".dateRange_popUp").removeClass("active");
        });
      });
    </script>
  </body>
</html>
